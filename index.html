<!doctype html>
<html>
<head>
  <script defer src="https://unpkg.com/alpinejs@3.2.2/dist/cdn.min.js"></script>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Accordion generator</title>
  <link href="tailwind.css" rel="stylesheet">
  <link href="autoresize.css" rel="stylesheet">
<style>
.yagi-accordion button{
  border: none;
  cursor: pointer;
  padding: 0;
  line-height: inherit;
  color: inherit;
  font-family: inherit;
  font-size: 100%;
  margin: 0;
  text-transform: none;
  -webkit-appearance: button;
  background-color: rgba(229, 231, 235);
  background-image: none;
}

.yagi-accordion button p{
  margin: 0;
}

.yagi-accordion .mx-auto{
  margin-left: auto;
  margin-right: auto;
}

.yagi-accordion .my-2{
  margin-top: 0.5rem;
  margin-bottom: 0.5rem;
}

.yagi-accordion .mb-2{
  margin-bottom: 0.5rem;
}

.yagi-accordion .flex{
  display: flex;
}

.yagi-accordion .table{
  display: table;
}

.yagi-accordion .hidden{
  display: none;
}

.yagi-accordion .h-6{
  height: 1.5rem;
}

.yagi-accordion .max-h-0{
  max-height: 0px;
}

.yagi-accordion .max-h-tall{
  max-height: 100rem;
}

@media (min-width: 768px){
  .yagi-accordion .max-h-tall{
    max-height: 50rem;
  }
}

.yagi-accordion .w-6{
  width: 1.5rem;
}

.yagi-accordion .w-full{
  width: 100%;
}

.yagi-accordion .max-w-prose{
  max-width: 80ch;
}

.yagi-accordion .items-center{
  align-items: center;
}

.yagi-accordion .justify-between{
  justify-content: space-between;
}

.yagi-accordion .overflow-hidden{
  overflow: hidden;
}

.yagi-accordion .rounded{
  border-radius: 0.25rem;
}

.yagi-accordion .p-3{
  padding: 0.75rem;
}

.yagi-accordion .px-2{
  padding-left: 0.5rem;
  padding-right: 0.5rem;
}

.yagi-accordion .text-left{
  text-align: left;
}

.yagi-accordion .font-bold{
  font-weight: 700;
}

.yagi-accordion .whitespace-pre-wrap{
  white-space: pre-wrap;
}

.yagi-accordion .transition-maxheight{
  transition-property: max-height;
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  transition-duration: 150ms;
}

.yagi-accordion .duration-500{
  transition-duration: 500ms;
}

.yagi-accordion .ease-out{
  transition-timing-function: cubic-bezier(0, 0, 0.2, 1);
}
</style>
</head>
<body class="bg-gray-50" x-data="accordions()">
  <!-- This example requires Tailwind CSS v2.0+ -->
  <div x-show="showModal" class="fixed z-10 inset-0 overflow-y-auto" aria-labelledby="modal-title" role="dialog" aria-modal="true" style="display:none;">
    <div class="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
      <!--
        Background overlay, show/hide based on modal state.

        Entering: "ease-out duration-300"
          From: "opacity-0"
          To: "opacity-100"
        Leaving: "ease-in duration-200"
          From: "opacity-100"
          To: "opacity-0"
      -->
      <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity" aria-hidden="true"></div>

      <!-- This element is to trick the browser into centering the modal contents. -->
      <span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true">&#8203;</span>

      <!--
        Modal panel, show/hide based on modal state.

        Entering: "ease-out duration-300"
          From: "opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"
          To: "opacity-100 translate-y-0 sm:scale-100"
        Leaving: "ease-in duration-200"
          From: "opacity-100 translate-y-0 sm:scale-100"
          To: "opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"
      -->
      <div 
        x-show="showModal"
        x-transition:enter="ease-out duration-300"
        x-transition:enter-start="opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"
        x-transition:enter-end="opacity-100 translate-y-0 sm:scale-100"
        x-transition:leave="ease-in duration-200"
        x-transition:leave-start="opacity-100 translate-y-0 sm:scale-100"
        x-transition:leave-end="opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"
        @click.away="showModal = false"
        class="inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6">
        <div>
          <div class="mt-0 text-center">
            <h3 class="text-lg leading-6 font-medium text-gray-900" id="modal-title">
              HTML Code
            </h3>
            <div class="mt-2">
              <textarea id="htmlcode" class="shadow-sm focus:ring-blue-500 focus:border-blue-500 focus:border-1 block w-full sm:text-sm border-gray-300 border px-3 py-2 rounded-md resize-none" style="min-height: 20rem;" role="textbox" x-text="accordionCode" readonly></textarea>
            </div>
            <a href="https://yagisoftware.com/articles/collapsible-accordion-faq-generator-instruction.html" target="_blank" class="inline-block mt-4 underline text-indigo-400">Click here for usage instructions</a>
          </div>
        </div>
        <div class="mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3 sm:grid-flow-row-dense">
          <button type="button" class="w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:col-start-2 sm:text-sm align-baseline" @click="copyCode()">
            Copy Code
            <svg xmlns="http://www.w3.org/2000/svg" class="ml-2 h-5 w-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3" />
            </svg>
          </button>
          <button type="button" class="mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:col-start-1 sm:text-sm" @click="showModal=false">
            Close
          </button>
        </div>
      </div>
    </div>
  </div>

  <h1 class="mt-8 mb-6 text-3xl md:text-5xl md:leading-normal drop-shadow font-bold text-center text-transparent bg-clip-text bg-gradient-to-b from-indigo-300 via-indigo-500 to-blue-300" style="-webkit-background-clip: text;">Accordion generator</h1>
  <p class="text-center mb-4 text-gray-400">by <a href="https://yagisoftware.com/about" class="underline hover:text-green-600" target="_blank">Yagi Software</a></p>

  <br>
  <button type="button" class="my-10 mx-auto block items-center px-4 py-2 text-lg font-medium rounded-md shadow text-white bg-gradient-to-b from-indigo-300 via-indigo-500 to-blue-500 hover:from-indigo-500 hover:via-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 hover:text-gray-300" @click="updateAccordionCode(); showModal = true">
    Get HTML code
  </button>
  <br>
  <!-- Two column container -->
  <div class="flex flex-col lg:flex-row flex-1 w-full px-4">
    <div class="w-full border-b-2 mb-4 lg:border-r-2 lg:border-b-0 border-gray-500 border-dashed px-8" x-init="expandFirstTextArea()">

      <template x-for="(accordion, index) in accordions">
      <!-- input container -->
      <div class="border-b border-gray-300 py-4">
        <template x-if="index > 0">
          <div class="w-full flex flex-row-reverse">
            <button type="button" @click="removeAccordion(index)">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7 text-gray-300 hover:text-red-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
              </svg>
            </button>
          </div>
        </template>
        <div>
          <label class="block text-sm font-medium text-gray-700">Title</label>
          <div class="mt-1">
            <input type="text" class="shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md" x-model="accordions[index].title" placeholder="Title...">
          </div>
        </div>

        <div class="mt-4">
          <label class="block text-sm font-medium text-gray-700">Content</label>
          <div class="mt-1 autoresize-textarea">
            <textarea class="shadow-sm focus:ring-blue-500 focus:border-blue-500 focus:border-1 block w-full sm:text-sm border-gray-300 border px-3 py-2 rounded-md" role="textbox" oninput="this.parentNode.dataset.replicatedValue = this.value" rows="1" placeholder="content..." x-model="accordions[index].content"></textarea>
          </div>
        </div>
      </div>
      </template>

      <button type="button" class="w-full my-8 inline-flex items-center px-4 py-2 border border-gray-300 shadow text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500" @click="addAccordion()">
        <p class="mx-auto">
          Add more accordion
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 inline" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
          </svg>
        </p>
      </button>
    </div>

    <!-- right column -->
    <div class="w-full relative">
      <img src="arrow.png" class="mx-auto absolute hidden lg:block" style="left: 12rem;top: -8rem;">
      <p class="text-sm text-gray-400 px-4">Preview</p>

      <div id="accordionContainer"><div class="yagi-accordion">
  <div class="mx-auto max-w-prose px-2">
    <template x-for="accordion in accordions">
      <div class="accordion-item">
        <button type="button" class="accordion-header w-full flex justify-between items-center my-2 p-3 rounded" onclick="this.nextElementSibling.classList.toggle('max-h-0');this.nextElementSibling.classList.toggle('max-h-tall'); this.querySelector('.plus').classList.toggle('hidden'); this.querySelector('.minus').classList.toggle('hidden');">
          <p class="font-bold text-left" x-text="accordion.title"></p>
          <svg xmlns="http://www.w3.org/2000/svg" class="plus h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
          </svg>
          <svg xmlns="http://www.w3.org/2000/svg" class="minus h-6 w-6 hidden" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18 12H6" />
          </svg>
        </button>
        <div class="accordion-content transition-maxheight ease-out duration-500 max-h-0 overflow-hidden mb-2">
          <p class="whitespace-pre-wrap" x-html="accordion.content"></p>
        </div>
      </div>
    </template>
  </div>
</div></div>

    </div>
  </div>


  <script>
    function accordions() {
      return {
        showModal: false,
        accordionCode: '',
        accordions: [ {title: 'Return policy', content: 'At vero eos et accusamus et iusto odio dignissimos ducimus qui blanditiis praesentium voluptatum deleniti atque corrupti quos dolores et quas molestias excepturi sint occaecati cupiditate non provident, similique sunt in culpa qui officia deserunt mollitia animi, id est laborum et dolorum fuga. Et harum quidem rerum facilis est et expedita distinctio. Nam libero tempore, cum soluta nobis est eligendi optio cumque nihil impedit quo minus id quod maxime placeat facere possimus, omnis voluptas assumenda est, omnis dolor repellendus. Temporibus autem quibusdam et aut officiis debitis aut rerum necessitatibus saepe eveniet ut et voluptates repudiandae sint et molestiae non recusandae. Itaque earum rerum hic tenetur a sapiente delectus, ut aut reiciendis voluptatibus maiores alias consequatur aut perferendis doloribus asperiores repellat.'}, {title: 'Your FAQ title here', content: 'Your content here'}],
        addAccordion(){
          this.accordions.push({title: "", content: ""});
        },
        removeAccordion(index){
          this.accordions.splice(index, 1);
        },
        updateAccordionCode(){
          let startline = "<!-- start yagi accordion -->\n";
          let endline = "\n<!-- end yagi accordion-->\n";
          let style = "<style>\n" + document.querySelector('style').innerHTML + "</style>\n";
          let fullHTML = document.querySelector('#accordionContainer').innerHTML;
          let startTemplateTagIndex = fullHTML.indexOf('\<template');
          let endTemplateTagIndex = fullHTML.indexOf('\</template') + 11;

          this.accordionCode = startline + style + fullHTML.substr(0, startTemplateTagIndex) + fullHTML.substr(endTemplateTagIndex) + endline;
        },
        copyCode() {
          document.getElementById('htmlcode').select();

          setTimeout(function(){ 
            document.execCommand("copy");
          }, 10);
        },
        expandFirstTextArea() {
           setTimeout(function(){ 
            let textarea = document.querySelector('.autoresize-textarea textarea');
            textarea.parentNode.dataset.replicatedValue = textarea.value;
          }, 50);
        }
      }
    }
  </script>
</body>
</html>
